# NonsenseGenerator – Manual

# Introduction

NonsenseGenerator is a web-based Java application: it analyzes the syntax of English sentences, validates the structure correctness and generates nonsense sentences by filling predefined templates with words from a built-in dictionary and user input. This user input is generated by extracting parts of speech from the sentence that the User provides. The User interacts via web interface, where every step, from sentence analysis to nonsense generation and optional saving, is accessible through clear actions and buttons.

# Technologies and Versions

| Name                  | Version     | Description                                                                                   |
|-----------------------|-------------|-----------------------------------------------------------------------------------------------|
| Java                  | 21          | Main programming language for backend logic and application structure                         |
| Spring Boot           | 3.2.0       | Framework for creating standalone, production-grade Spring applications                       |
| Spring Web MVC        | 6.1.0       | Module for building web applications with MVC pattern and REST controllers                    |
| Google Cloud NLP      | v1 (client: 2.35.0) | Cloud-based API for syntax analysis and text moderation of English sentences               |
| Thymeleaf             | 3.1.2       | Server-side Java template engine for HTML rendering                                           |
| Lombok                | 1.18.30     | Library for reducing boilerplate code (getters, setters, constructors)                       |
| Spring Boot DevTools  | 3.2.0       | Development tools for automatic restart and live reload                                       |
| JUnit Jupiter         | 5.10.0      | Modern testing framework for Java (JUnit 5)                                                  |
| Mockito               | 4.0.0       | Mocking framework for unit tests                                                              |
| Maven                 | 3.9.9       | Build automation and dependency management tool                                               |


**Note**:  
The application is intended to run on any OS supported by Java 21 and has been tested on Windows 10/11.

# Project Description 

- **Input**: User provides an English sentence through the web interface.
- **Analysis**: The sentence is analyzed using Google Cloud Natural Language API to extract its grammatical structure and to validate English usage.
- **Moderation Analysis**: The sentence is checked for applicable moderation categories, such as toxicity or insults, using the Google Cloud Natural Language API.
- **Template Generation**: If the sentence is found to be valid after different checks, a nonsense sentence is generated by randomly generating a template and filling it with words from the input and the built-in dictionary.
- **Output**: The page displays the detailed syntactic analysis, moderation categories and their scores, and the generated nonsense sentence.
- **Optional**: The user can save generated sentences by downloading a `.txt` file.

# 1. Web Application

- **index.html**:  
  - **Input field**: For entering the English sentence.
  - **"Analyze" button**: Submits the sentence for analysis.
  - **"Download" button**: Allows the user to download the output sentences as a `.txt` file.
  - **Output area**: Displays:
    - Syntactic analysis
    - Moderation categories and scores for the input sentence
    - Error or warning messages (invalid input, language not supported, special characters used).
    - Nonsense generated sentence.

# 2. Logic

- **WebController.java**:  
  Handles HTTP GET/POST requests, directs user input to the backend logic, and manages data which the user will see.

- **Controller.java**:  
  - Sentence analysis and validation with the Google Cloud Natural Language API.
  - Handles template generation using the extracted input parts and the pre-loaded dictionary parts, and the saving to history of the generated sentence.
  - Return an encapsulated response usable by the WebController.

- **GoogleNlpService**:  
  Handles communication with Google Cloud Natural Language API for syntax analysis, language detection and moderation analysis.

- **InputParts.java**:  
  Organizes words by category (#noun, #verb, #adjective etc.) from a response provided from the API call.

- **DictionaryParts.java**:  
  Loads and organizes words by category (#noun, #verb, #adjective etc.) from `dictionary.txt`.

- **History.java**:  
  Tracks and saves only a certain amount of the recently generated nonsense sentences.

# 3. Resources

- **dictionary.txt**:  
  Custom list of words grouped by category (#noun, #verb, #adjective).

- **sentenceTemplates.txt**:  
  Template sentences with placeholders ([noun], [adjective]) that have to be filled.

- **index.html**:  
  Main HTML page for user interaction, used as a template in conjuction with Thymeleaf


# Detailed File Structure

```

NonsenseGenerator/
.
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── nonsensegen/
│   │   │       ├── Controller.java
│   │   │       ├── CustomErrorController.java
│   │   │       ├── GoogleNlpService.java
│   │   │       ├── History.java
│   │   │       ├── Main.java
│   │   │       ├── NonsensegeneratorApplication.java
│   │   │       ├── Template.java
│   │   │       ├── WebController.java
│   │   │       └── parts/
│   │   │           ├── AbstractParts.java
│   │   │           ├── DictionaryParts.java
│   │   │           └── InputParts.java
│   │   └── resources/
│   │       ├── dictionary.txt
│   │       ├── sentenceTemplates.txt
│   │       ├── static/
│   │       │   └── css/
│   │       │       └── styles.css
│   │       └── templates/
│   │           ├── index.html
│   │           └── error/
│   │               ├── 404.html
│   │               ├── 505.html
│   │               └── generic.html
│   └── test/
│       ├── java/
│       │   └── nonsensegen/
│       │       ├── ControllerTest.java
│       │       ├── CustomErrorControllerTest.java
│       │       ├── HistoryTest.java
│       │       ├── TemplateTest.java
│       │       ├── TestHelpers.java
│       │       ├── WebControllerTest.java
│       │       └── parts/
│       │           ├── DictionaryPartsTest.java
│       │           └── InputPartsTest.java
│       └── resources/
│           └── dictionary_test.txt
├── pom.xml
└── README.md

```

# How it works

# 1. User Input

- User accesses the application, by default, at `http://localhost:8080`.
- Types an English sentence into the input field.
- Clicks the **"Analyze"** button to submit.
- Clicks "Yes" when prompted to confirm to proceed with the analysis.

# 2. Syntactic and Language Analysis

- `WebController.java` receives the input and sends it for analysis to `Controller.java`, where is used `GoogleNlpService` to:
  - Check sentence language (must be English).
  - Extract tokens and assign parts.
  - Validate that the sentence is structurally correct.
- If the sentence is invalid an error or warning is displayed.

# 3. Content Moderation
- `Controller.java` uses `GoogleNlpService` to retrieve the content moderation categories which apply to the provided input sentence, and only those that reach a certain threshold are given back to the user. 
An example of these moderation categories can be toxicity, insults, profanity, violence or harm

# 5. Output 

- The web page displays:
  - Error or warning messages if any check on the sentence fails, hiding other results.
  - The detailed structural analysis.
  - Each moderation category (that has a high enough confidence score) for the input.
  - The generated nonsense sentence only AFTER the user clicks **"Generate New Sentence"**.

# 4. Nonsense Sentence Generation

- `Template.java`:
  - Generates a template by taking parts from `sentenceTemplates.txt` and combining them.
  - Fills placeholders with words from user input (`InputParts.java`) and from `dictionary.txt` (`DictionaryParts.java`).
- The nonsense sentence is then returned to be displayed.

# 6. Saving Output

- The user can click the **"Download Generated Sentences"** button to save the **last 20** generated sentences as a `.txt` file.
- The history is handled through the `History.java` class.


# Installation and Setup

# Prerequisites

- Java JDK 21 ([download](https://adoptopenjdk.net/))
- Maven 3.9.9 ([download](https://maven.apache.org/))
- Google Cloud account with NLP API enabled ([setup guide](https://cloud.google.com/))
- Download Google NLP credentials as `credentials.json`

# Steps

1. **Clone the Repository**
   ```bash
   git clone https://github.com/davidpopusoi/NonsenseGenerator.git
   cd NonsenseGenerator
   ```

2. **Configure Google Credentials**
   - In your Google Cloud Console, access `IAM & Admin` > `Service Accounts`
   - Create a new Service Account
   - Open the Service Account and create a new Key in `JSON` format
   - Download your Google Cloud Console credentials
   - Set the path to your credentials in the `src/main/resources/application.properties` properties file (e.g. `C:/Users/User/Downloads/credentials.json`)

3. **Build and Run Java Application**
   - Go back to the root directory if needed.
   - Build the project:
     ```bash
     mvn clean install
     ```
   - Run the Spring Boot application:
     ```bash
     mvn spring-boot:run
     ```

4. **Access the Application**
   - Open your browser and go to:  
     `http://localhost:8080`

# Error Handling 

- Only English sentences are supported and analyzed.
- The application requires an internet connection for the Google Cloud Natural Language API.
- If the API credentials are missing or incorrect, analysis will fail with an error.
- Error messages are shown to the user for invalid input, language mismatches, incorrect sentence structure, using special characters.

# Design Principles and Patterns

- **Controller (GRASP)**: `Controller.java` coordinates all main operations
- **Singleton**: Each class (Template, DictionaryParts, History, ToxicityService) has a distinct, focused purpose.
- **Low Coupling / High Cohesion (GoF)**: Internal logic is modular and easily maintainable.
- **Facade (GoF)**: Controller acts as a facade, exposing a simple interface to the web layer while hiding system complexity.
- **Extensibility**: Adding templates or dictionary entries requires no code changes—just edit the resource files.


# Main Functions

- **Spring Boot**: Used for application lifecycle, dependency injection, and configuration management.
- **Google Cloud Natural Language API Client Library**: Performs sentence analysis and syntax parsing.
- **JUnit**: Provides support for writing and running automated Java tests.


# External APIs Used

- **Google Cloud Natural Language API**  
  [Official documentation](https://cloud.google.com/natural-language/docs)